<template>
  <div class="snippet-cart-button" :class="{'in-cart': isCartProduct}" @click="addToCart($event)">
    <svg class="icon to-cart icon--18x18 " viewBox="0 0 18 18">
        <path d="M0 0.642857C0 0.472361 0.0632147 0.308848 0.175738 0.188289C0.28826 0.0677295 0.440874 0 0.600006 0H2.40002C2.53386 3.96148e-05 2.66384 0.0480223 2.7693 0.136318C2.87476 0.224613 2.94964 0.348151 2.98203 0.487286L3.46803 2.57143H17.4002C17.4913 2.57146 17.5812 2.59373 17.6631 2.63655C17.745 2.67938 17.8168 2.74164 17.8729 2.81859C17.929 2.89555 17.968 2.98519 17.9869 3.08071C18.0058 3.17623 18.0042 3.27511 17.9822 3.36986L16.1821 11.0841C16.1498 11.2233 16.0749 11.3468 15.9694 11.4351C15.864 11.5234 15.734 11.5714 15.6001 11.5714H4.80004C4.66621 11.5714 4.53622 11.5234 4.43076 11.4351C4.32531 11.3468 4.25043 11.2233 4.21804 11.0841L1.93202 1.28571H0.600006C0.440874 1.28571 0.28826 1.21798 0.175738 1.09743C0.0632147 0.976867 0 0.813353 0 0.642857ZM3.76803 3.85714L5.26805 10.2857H15.1321L16.6322 3.85714H3.76803ZM6.00006 14.1429C5.68179 14.1429 5.37657 14.2783 5.15152 14.5194C4.92647 14.7606 4.80004 15.0876 4.80004 15.4286C4.80004 15.7696 4.92647 16.0966 5.15152 16.3377C5.37657 16.5788 5.68179 16.7143 6.00006 16.7143C6.31832 16.7143 6.62355 16.5788 6.84859 16.3377C7.07364 16.0966 7.20007 15.7696 7.20007 15.4286C7.20007 15.0876 7.07364 14.7606 6.84859 14.5194C6.62355 14.2783 6.31832 14.1429 6.00006 14.1429ZM3.60003 15.4286C3.60003 14.7466 3.85289 14.0925 4.30298 13.6103C4.75307 13.1281 5.36353 12.8571 6.00006 12.8571C6.63658 12.8571 7.24704 13.1281 7.69713 13.6103C8.14722 14.0925 8.40008 14.7466 8.40008 15.4286C8.40008 16.1106 8.14722 16.7646 7.69713 17.2468C7.24704 17.7291 6.63658 18 6.00006 18C5.36353 18 4.75307 17.7291 4.30298 17.2468C3.85289 16.7646 3.60003 16.1106 3.60003 15.4286ZM14.4001 14.1429C14.0819 14.1429 13.7766 14.2783 13.5516 14.5194C13.3266 14.7606 13.2001 15.0876 13.2001 15.4286C13.2001 15.7696 13.3266 16.0966 13.5516 16.3377C13.7766 16.5788 14.0819 16.7143 14.4001 16.7143C14.7184 16.7143 15.0236 16.5788 15.2487 16.3377C15.4737 16.0966 15.6001 15.7696 15.6001 15.4286C15.6001 15.0876 15.4737 14.7606 15.2487 14.5194C15.0236 14.2783 14.7184 14.1429 14.4001 14.1429ZM12.0001 15.4286C12.0001 14.7466 12.253 14.0925 12.7031 13.6103C13.1532 13.1281 13.7636 12.8571 14.4001 12.8571C15.0367 12.8571 15.6471 13.1281 16.0972 13.6103C16.5473 14.0925 16.8002 14.7466 16.8002 15.4286C16.8002 16.1106 16.5473 16.7646 16.0972 17.2468C15.6471 17.7291 15.0367 18 14.4001 18C13.7636 18 13.1532 17.7291 12.7031 17.2468C12.253 16.7646 12.0001 16.1106 12.0001 15.4286Z" fill="white"></path>
        <path d="M10.8948 5.2105C10.8948 5.08487 10.8449 4.96439 10.7561 4.87556C10.6673 4.78672 10.5468 4.73682 10.4212 4.73682C10.2955 4.73682 10.175 4.78672 10.0862 4.87556C9.99738 4.96439 9.94747 5.08487 9.94747 5.2105V6.63155H8.52642C8.40079 6.63155 8.28031 6.68146 8.19147 6.77029C8.10264 6.85913 8.05273 6.97961 8.05273 7.10524C8.05273 7.23087 8.10264 7.35135 8.19147 7.44018C8.28031 7.52902 8.40079 7.57892 8.52642 7.57892H9.94747V8.99997C9.94747 9.1256 9.99738 9.24609 10.0862 9.33492C10.175 9.42375 10.2955 9.47366 10.4212 9.47366C10.5468 9.47366 10.6673 9.42375 10.7561 9.33492C10.8449 9.24609 10.8948 9.1256 10.8948 8.99997V7.57892H12.3159C12.4415 7.57892 12.562 7.52902 12.6508 7.44018C12.7397 7.35135 12.7896 7.23087 12.7896 7.10524C12.7896 6.97961 12.7397 6.85913 12.6508 6.77029C12.562 6.68146 12.4415 6.63155 12.3159 6.63155H10.8948V5.2105Z" fill="white"></path>
    </svg>
    <svg class="icon in-cart icon--18x18 " viewBox="0 0 18 18"><path d="M0 0.642857C0 0.472361 0.0632147 0.308848 0.175738 0.188289C0.28826 0.0677295 0.440874 0 0.600006 0H2.40002C2.53386 3.96148e-05 2.66384 0.0480223 2.7693 0.136318C2.87476 0.224613 2.94964 0.348151 2.98203 0.487286L3.46803 2.57143H17.4002C17.4913 2.57146 17.5812 2.59373 17.6631 2.63655C17.745 2.67938 17.8168 2.74164 17.8729 2.81859C17.929 2.89555 17.968 2.98519 17.9869 3.08071C18.0058 3.17623 18.0042 3.27511 17.9822 3.36986L16.1821 11.0841C16.1498 11.2233 16.0749 11.3468 15.9694 11.4351C15.864 11.5234 15.734 11.5714 15.6001 11.5714H4.80004C4.66621 11.5714 4.53622 11.5234 4.43076 11.4351C4.32531 11.3468 4.25043 11.2233 4.21804 11.0841L1.93202 1.28571H0.600006C0.440874 1.28571 0.28826 1.21798 0.175738 1.09743C0.0632147 0.976867 0 0.813353 0 0.642857ZM3.76803 3.85714L5.26805 10.2857H15.1321L16.6322 3.85714H3.76803ZM6.00006 14.1429C5.68179 14.1429 5.37657 14.2783 5.15152 14.5194C4.92647 14.7606 4.80004 15.0876 4.80004 15.4286C4.80004 15.7696 4.92647 16.0966 5.15152 16.3377C5.37657 16.5788 5.68179 16.7143 6.00006 16.7143C6.31832 16.7143 6.62355 16.5788 6.84859 16.3377C7.07364 16.0966 7.20007 15.7696 7.20007 15.4286C7.20007 15.0876 7.07364 14.7606 6.84859 14.5194C6.62355 14.2783 6.31832 14.1429 6.00006 14.1429ZM3.60003 15.4286C3.60003 14.7466 3.85289 14.0925 4.30298 13.6103C4.75307 13.1281 5.36353 12.8571 6.00006 12.8571C6.63658 12.8571 7.24704 13.1281 7.69713 13.6103C8.14722 14.0925 8.40008 14.7466 8.40008 15.4286C8.40008 16.1106 8.14722 16.7646 7.69713 17.2468C7.24704 17.7291 6.63658 18 6.00006 18C5.36353 18 4.75307 17.7291 4.30298 17.2468C3.85289 16.7646 3.60003 16.1106 3.60003 15.4286ZM14.4001 14.1429C14.0819 14.1429 13.7766 14.2783 13.5516 14.5194C13.3266 14.7606 13.2001 15.0876 13.2001 15.4286C13.2001 15.7696 13.3266 16.0966 13.5516 16.3377C13.7766 16.5788 14.0819 16.7143 14.4001 16.7143C14.7184 16.7143 15.0236 16.5788 15.2487 16.3377C15.4737 16.0966 15.6001 15.7696 15.6001 15.4286C15.6001 15.0876 15.4737 14.7606 15.2487 14.5194C15.0236 14.2783 14.7184 14.1429 14.4001 14.1429ZM12.0001 15.4286C12.0001 14.7466 12.253 14.0925 12.7031 13.6103C13.1532 13.1281 13.7636 12.8571 14.4001 12.8571C15.0367 12.8571 15.6471 13.1281 16.0972 13.6103C16.5473 14.0925 16.8002 14.7466 16.8002 15.4286C16.8002 16.1106 16.5473 16.7646 16.0972 17.2468C15.6471 17.7291 15.0367 18 14.4001 18C13.7636 18 13.1532 17.7291 12.7031 17.2468C12.253 16.7646 12.0001 16.1106 12.0001 15.4286Z" fill="#353d4a"></path><path d="M13.8401 5.85431C13.9425 5.76046 14 5.63317 14 5.50044C14 5.36772 13.9425 5.24043 13.8401 5.14658C13.7377 5.05272 13.5988 5 13.454 5C13.3092 5 13.1703 5.05272 13.0679 5.14658L10.182 7.79257L8.93211 6.646C8.88141 6.59953 8.82122 6.56267 8.75497 6.53752C8.68872 6.51237 8.61772 6.49943 8.54602 6.49943C8.47431 6.49943 8.40331 6.51237 8.33707 6.53752C8.27082 6.56267 8.21063 6.59953 8.15993 6.646C8.10922 6.69247 8.069 6.74764 8.04156 6.80836C8.01412 6.86907 8 6.93415 8 6.99987C8 7.06559 8.01412 7.13066 8.04156 7.19138C8.069 7.2521 8.10922 7.30726 8.15993 7.35373L9.79591 8.85316C9.84657 8.89971 9.90675 8.93664 9.973 8.96183C10.0393 8.98703 10.1103 9 10.182 9C10.2537 9 10.3248 8.98703 10.391 8.96183C10.4573 8.93664 10.5174 8.89971 10.5681 8.85316L13.8401 5.85431Z" fill="#353d4a"></path></svg>
  </div>
</template>

<script>
import { defineComponent } from 'vue'
import api from "@/api/backend-api"
import {useStore} from "vuex"
import {computed} from 'vue'

export default defineComponent({
    name: 'SnippetCartButton',
    props: {
      article: {
            default: () => {}
      }
    },
    setup(props) {
      const store = useStore();

      let isCartProduct = computed(() => checkCartProduct())

      let checkCartProduct = () => store.getters.checkCartProduct(props.article)

      let addToCart = (event) => {
        var button = event.target.closest('.snippet-cart-button')
        if(button && !button.classList.contains('in-cart')){
          button.classList.add('in-cart')
          api.addCartProduct(props.article, 1)
        }
      }

      return {
        isCartProduct,
        checkCartProduct,
        addToCart
      }
    }
})
</script>

<style scoped>
h3 {
  margin: 40px 0 0;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #0595e6;
  text-decoration: none;
}
.snippet-cart-button{
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: center;
    width: 50px;
    height: 32px;
    padding: 0!important;
    color: #fff;
    background-color: #0595e6;
    user-select: none;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out;
    cursor: pointer;
    border: 1px solid transparent;
    border-radius: 6px;
    box-sizing: border-box;
}
.snippet-cart-button.in-cart{
    color: #353d4a;
    border-color: #0595e6;
    background-color: transparent;
}
.snippet-cart-button:not(.in-cart):hover{
  color: #fff;
  border-color: #06a4fd;
  background-color: #06a4fd;
}
.snippet-cart-button svg{
  display: none;
}
.snippet-cart-button:not(.in-cart) svg.to-cart{
  display: block;
}
.snippet-cart-button.in-cart svg.in-cart{
  display: block;
}
</style>